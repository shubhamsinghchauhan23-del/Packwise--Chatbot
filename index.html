<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PackWise AI Chatbot</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f9; margin:0; padding:0;}
    .header {background:#2a9d8f; color:white; padding:20px; text-align:center;}
    .tagline {font-size:18px; margin-top:5px;}
    .container {display:flex; flex-direction: row; height: calc(100vh - 100px);}
    .chat-area {flex:1; padding:20px; display:flex; flex-direction:column; justify-content: space-between;}
    .messages {overflow-y:auto; flex:1; border:1px solid #ddd; background:white; border-radius:8px; padding:10px;}
    .message {margin:8px 0;}
    .message.user {text-align:right; color:#333;}
    .message.bot {text-align:left; color:#005f73;}
    .input-area {margin-top:10px;}
    .input-area input {width:80%; padding:10px; border:1px solid #ccc; border-radius:4px;}
    .input-area button {padding:10px; background:#e76f51; color:white; border:none; border-radius:4px; cursor:pointer;}
    .panel {width:300px; background:#fff; border-left:1px solid #ccc; padding:20px; display:flex; flex-direction: column;}
    .plan-toggle {background:#264653; color:white; padding:10px; border:none; border-radius:4px; cursor:pointer; margin-bottom:10px;}
    .steps {display:none; margin-top:10px; }
    .steps ol {padding-left:20px;}
    .assumptions {margin-top:auto; font-size:12px; color:#555; border-top:1px solid #ddd; padding-top:10px;}
  </style>
</head>
<body>
  <div class="header">
    <h1>PackWise AI</h1>
    <div class="tagline">Smart packaging & waste reduction assistant</div>
  </div>
  <div class="container">
    <div class="chat-area">
      <div class="messages" id="messages">
        <div class="message bot">Hi! I’m PackWise AI. Ask me about packaging footprint, alternatives, or compliance.</div>
      </div>
      <div class="input-area">
        <input type="text" id="userInput" placeholder="Type your message…" />
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
    <div class="panel">
      <button class="plan-toggle" onclick="togglePlan()">View Plan</button>
      <div class="steps" id="planSteps">
        <h4>Agent Plan</h4>
        <ol>
          <li>Analyze SKU data</li>
          <li>Generate recommendations</li>
          <li>Draft supplier RFP & report</li>
        </ol>
      </div>
      <div class="assumptions">
        <p><strong>Assumptions:</strong></p>
        <ul>
          <li>Supplier databases up-to-date</li>
          <li>Cost neutrality achievable</li>
          <li>Consumers respond to eco-labels</li>
        </ul>
        <p><em>Ethics note: Simulated demo, responses are precoded.</em></p>
      </div>
    </div>
  </div>

  <script>
    function togglePlan() {
      const steps = document.getElementById('planSteps');
      if (steps.style.display === 'none' || steps.style.display === '') {
        steps.style.display = 'block';
      } else {
        steps.style.display = 'none';
      }
    }

    function sendMessage() {
      const inputEl = document.getElementById('userInput');
      const text = inputEl.value.trim();
      if (!text) return;
      addMessage(text, 'user');
      inputEl.value = '';

      // Simple canned responses
      setTimeout(() => {
        let reply = "Sorry, I didn’t understand that.";
        const l = text.toLowerCase();
        if (l.includes('footprint') || l.includes('mass')) {
          reply = "Your SKU has ~230 g packaging weight, recyclability 45%.";
        } else if (l.includes('alternative') || l.includes('suggest')) {
          reply = "Try using 60% rPET bottle + lighter carton; may reduce weight by 18%.";
        } else if (l.includes('rpf') || l.includes('supplier brief') || l.includes('report')) {
          reply = "I generated supplier brief and compliance narrative ready to share.";
        }
        addMessage(reply, 'bot');
      }, 800);
    }

    function addMessage(text, who) {
      const msgDiv = document.createElement('div');
      msgDiv.className = 'message ' + who;
      msgDiv.innerText = text;
      const msgs = document.getElementById('messages');
      msgs.appendChild(msgDiv);
      msgs.scrollTop = msgs.scrollHeight;
    }
  </script>
</body>
</html>
